# Homatask 3

## Task 1
   Создать группу **sales** с **gid=4000**:
   
   ```
   # groupadd -g 4000
   ```
   
   ![Результат вызова команды](/3/screenshots/task1_1.png)
   
   Создать пользователей **bob, alice, eve** с основной группой **sales**:
   
   ```
   # useradd -g sales bob
   # useradd -g sales alice
   # useradd -g sales eve
   ```
   
   ![Результат вызова команды](/3/screenshots/task1_2.png)
   
   Изменить пользователям пароли: 
   
   ```
   # passwd bob
   # passwd alice
   # passwd eve
   ```
   
   ![Результат вызова команды](/3/screenshots/task1_3.png)
   
   Файл **/etc/login.defs** содержит в себе настройки времени "жизни" паролей и аккаунтов, которые используются по умолчанию при создании 
   новых пользователей и групп в системе.
   
   Обновим */etc/login.defs** для того, чтобы теперь все новые аккаунты должны были менять (обновлять) свои пароли каждые **30 дней**, а именно изменим 
   значение переменной **PASS_MAX_DAYS** на равное 30.
   
   ```
   # vi /etc/login.defs
   ```
   
   ![Результат вызова команды](/3/screenshots/task1_4.png)
   
   Для того, чтобы убедиться, что внесенные изменияния действуют, создадим нового пользователя *Leo* и проверим информации о сроках действия его пароля:
   
   ![Результат вызова команды](/3/screenshots/task1_5.png)
   
   Изменить настройки пользователей из группы **sales (bob, alice, eve)** таким образом, чтобы срок действия их аккаунтов истек через **90 дней**:
   
   ```
   # chage -E $(date -d +90days +%Y-%m-%d) bob
   # chage -E 2021-04-23 alice
   # chage -E $(date -d +90days +%Y-%m-%d) eve   
   ```
   
   После флага **-E** необходимо указать точную дату истечения срока действия аккаунта пользователя в формате YYYY-MM-DD, либо восвпользоваться выводом утилиты ***date***.
   
   ![Результат вызова команды](/3/screenshots/task1_6.png)
   
   Установить для **bob** время смены пароля каждые **15 дней**:
   
   ```
   # chage -M 15 bob
   ```
   
   ![Результат вызова команды](/3/screenshots/task1_7.png)
   
   Для того, чтобы заставить пользователей сменить пароль после первого логина (т.е. в следующий раз, когда пользователь зайдет в систему), необходимо вызвать **chage** со следующими параметрами: 
   
   ```
   # chage -d 0 bob
   ```
   
   Флаг **-d** устанавливает дату последнего изменения пароля пользователя. Когда это значение равно нулю (или когда устанавленная дата + значение PASS_MAX_DAYS становится меньше, чем текущая дата), пользователь будет вынужден изменить пароль после первого входа в систему.
   
   ![Результат вызова команды](/3/screenshots/task1_8.png)
   
   При попытке входа в систему пользователь **bob** получает предупреждение и предложение о смене пароля:
   
   ![Результат вызова команды](/3/screenshots/task1_9.png)
   
  ***
   
     
   

## Task 2
   Создадим трёх новых пользователей **(glen, antony, lesly)** в группе **students**
   
   ```
   # groupadd students
   # useradd -g students glen
   # useradd -g students antony
   # useradd -g students lesly
   ```
   
   ![Результат вызова команды](/3/screenshots/task2_1.png)
   
   Создадим директорию **/home/students/**. 
   
   ```
   # mkdir /home/students
   ```
   
   ![Результат вызова команды](/3/screenshots/task2_2.png)
   
   Изменим группу её владельца на **students** и изменим ее параметры доступа таким образом, чтобы доступ к её содержимому, а также возможность создавать и удалять файлы имели только пользователи группы **students**:
   
   ```
   # cd /home
   # chown :students ./students && chmod g+w ./students && chmod o-rx ./students
   ```
   ![Результат вызова команды](/3/screenshots/task2_3.png)
   
   Теперь пользователи группы **students (lesly, antony, glen)** имеют совместный доступ к файлам директории **/home/students/**. Другие пользователи (конечно, кроме *root*) доступа к этой директории не имеют из-за установленных нами ранее прав доступа. На рисунке ниже это продемонстрировано:
   
   ![Результат вызова команды](/3/screenshots/task2_4.png)
   
   Для того, чтобы все файлы, созданные в директории **/home/students/**, автоматически присваивались группе **students**, нужно установить **sgid** на эту директорию:
   
   ```
   # chmod g+s /home/students
   ```
   
   ![Результат вызова команды](/3/screenshots/task2_5.png)
   
   Теперь даже файлы, созданные под пользователем *root*, принадлежат группе **students**.
   
   ![Результат вызова команды](/3/screenshots/task2_6.png)
   
  ***
 
 
   
## Task 3
  
