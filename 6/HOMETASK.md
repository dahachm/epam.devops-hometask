# Hometask 6

## Task 1 
  С помощью утилиты nmcli добавить второй IP адрес сетевому интерфейсу enp0s3:
  
   - IP Адрес должен быть назначен из пула немаршрутизируемых в Интернете пулов (aka серых IP)
   - Адрес НЕ должен принадлежать пулу адресов, который уже назначен какому-либо из интерфейсов
   - В подсети нового адреса должно быть как можно меньше адресов (broadcast и network адрес назначать интерфейсу нельзя)
   - перезагрузить машину, убедиться что оба интерфейса имеют оба адреса (должна быть возможность подключиться по ssh к новому IP адресу с виртаульной машины)
   
   ___
   
   IP адрес, назначенный на интерфейс **enp0s3** - **10.0.2.15/24** (выдается автоматически службой *dhcp*).
   
   ![Результат работы команды](/6/screenshots/task1_1.png)
   
   Назначим ему 2-й IP адрес - **10.0.0.1/30** (всего 4 адреса в подсети: 2 хоста + broadcast + network):
   
   ```
   # nmcli con modify enp0s3 +ipv4.addresses "10.0.0.1/30"
   ```
   
   И проверим, как внесенные изменения отразились на кофигурационном файле интерфейса **enp0s8**:
   
   ```
   $ cat /etc/sysconfig/network-scripts/ifcfg-enp0s3
   ```
   
   ![Результат работы команды](/6/screenshots/task1_2.png)
   
   Перезагрузим машину и посмотрим на состояние **enp0s3**:
   
   ```
   # reboot
   ```
   
   ```
   $ ip a
   ```
   
   ![Результат работы команды](/6/screenshots/task1_3.png)
   
   Проверим возможность подключения к **10.0.0.1** по **ssh**:
   
   ![Результат работы команды](/6/screenshots/task1_4.png)
   ___  
     
   
## Task 2
  Новый IP адрес должен "резолвиться" в "private" DNS запись, а hostname вашей машины должен быть таким же, как у ближайшей галактики к нашей Солнечной системе 
(или выбрать обычное скучное имя). Продемонстрировать результаты с помощью  одной из утилит (dig, nslookup, host)* или другой.

  ___
  Настройка DNS сервера:
  
  ```
  # yum install bind bind-utils
  # vi /etc/named.conf
  ```
  
  Вставить следующее содержимое:
  ```
  ```
  
  ![Результат работы команды](/6/screenshots/task2_.png)
  
  
  
  
  
  Сменим hostname машины на **Dracaena** (род растений, один экземляр такой Драцены окаймленной есть среди моих питомцев; *dracaena* с латинского некторые переводят как *драконша*).
  
  Чтобы посмотреть текущее значений *hostname*:
  
  ```
  # hostname 
  ```
  
  Чтобы установить новое значение *hostname*:
  
  ```
  # hostname -b dracaena
  ```
  
  ![Результат работы команды](/6/screenshots/task2_.png)
  
  ___

## Task 3
  tcpdump и веселье:
  
   - Подключиться по ssh ко второму IP адресу интерфейса **enp0s3** машины, залогиниться.
   - В одной сессии запустить tcpdum, в другой сессии попытаться получить клиент контент страницы по адресу: example.com,  используя любой http.
   -* Получить контент страницы с помощью telnet
   - В полученном выводе, найти содержимое страницы и все HTTP заголовки.
   - tcpdump команда должна быть максимально "узконаправленной", то есть, в выводе должно быть минимум трафика, не относящегося к цели задания.
   
   ___
   
   ```
   $ ssh admin@10.0.0.1
   ```
   
   ![Результат работы команды](/6/screenshots/task3_1.png)
   
   Запуск **tcpdump** для отслеживания трафика от/к ***example.com*** через интерфейс **enp0s3**:
   
   ```
   # tcpdump -n -i enp0s3 host example.com
   ```
   
   Получение страницы от ***example.com*** с использованием **curl**:
   
   ```
   $ curl http://example.com
   ```
   
   В ответ на запрос получаем содержимое страницы index.html на сервере **example.com**:
   
   ![Результат работы команды](/6/screenshots/task3_2.png)
   
   Анализ трафика, полученного **tcpdump** (*curl*):
   
   ![Результат работы команды](/6/screenshots/task3_4.png)
   
   Здесь и в следующем примере **клиент** - наша ВМ с IP адресом **10.0.2.15**, **сервер** - example.com c IP адресом **93.184.216.34**.
   
   Получение страницы index.html на **example.com** с использованием **telnet**:
   
   ```
   $ telnet example.com 80
   ...
   > GET / HTTP/1.1
   > HOST: example.com
   > [press enter]
   ```
   
   В получаем содержимое страницы index.html на сервере **example.com**:
   
   ![Результат работы команды](/6/screenshots/task3_3.png)
   
   Для того, чтобы закрыть соединения необходимо нажать ***Ctrl***+**]** и ввести ***quit***.
   
   Анализ трафика, полученного **tcpdump**(*telnet*):
   
   ![Результат работы команды](/6/screenshots/task3_5.png)
   
   Утилита **telnet** работает по протоколу *telnet* и предназначена для удаленного управления путём передачи текстовых команд (из локального терминала) на сервер. В данной ситуации, мы подключились к порту 80, на котором "поднят" веб-сервер, и отправили http запрос GET на получение содержимого страницы index.html, расположенной на сервере.
   ___
  
## Task 4
  Найти номер порта, на котором запущен SSH сервер на хосте: **79.134.223.227** + все открытые порты.
  
  Следует быть готовым к тому, что сканирование ВСЕХ портов заёмет некоторое продолжительное время:
  
  ```
  # nmap -p- 79.134.223.227
  ```
  
  Как видно на рисунке ниже, сканирование дефолтных портов (1000 штук) не дало каких-либо значимых результатов - трафик на этих портах фильтруется (т.е. скорее всего блокируется брэндмауром или еще чем-то).
  
  ![Результат работы команды](/6/screenshots/task4_1.png)
  
  Спустя 3310.19 секунд (~ 56 минут) получаем результат: открыт только один порт - **60022**.
  
  Узнаем, что за служба обслуживает этот порт:
  
  ```
  # nmap -sV -p 60022 79.134.223.227
  ```
  
  ![Результат работы команды](/6/screenshots/task4_3.png)
  
  Таким образом выяснили, что на единсвтенном открытом порту на хосте **79.134.223.227** запущена служба **SSH**.
  

## Task 5
  Получить доступ на хост с адресом: **45.88.76.32**.
  Цель задания: найти сообщение в icmp трафике, который поступает на этот хост (на lo интерфейс и/или 42.88.76.32). Представить сообщнение 
  в читаемом варианте и предоставить команду которой вы пользовались, чтобы прочесть это сообщение. Подсказка: вам доступен tcpdump (/usr/sbin/tcpdump) на хосте.
  
